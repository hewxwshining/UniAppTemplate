{"version":3,"file":"CustomTabBar.js","sources":["components/CustomTabBar/CustomTabBar.vue","E:/ProgramFilesForTools/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjovdW5pQXBwVGVtcGxhdGUvY29tcG9uZW50cy9DdXN0b21UYWJCYXIvQ3VzdG9tVGFiQmFyLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"custom-tabbar-wrapper\">\r\n\t\t<view class=\"custom-tabbar\">\r\n\t\t\t<view v-for=\"(item, index) in visibleTabList\" :key=\"index\" class=\"tabbar-item\"\r\n\t\t\t\t:class=\"{ active: currentPagePath === item.pagePath }\" @click=\"handleTabClick(item,index)\">\r\n\t\t\t\t<image :src=\"currentPagePath === item.pagePath ? item.selectedIconPath : item.iconPath\"\r\n\t\t\t\t\tclass=\"tabbar-icon\" mode=\"aspectFit\" />\r\n\t\t\t\t<text class=\"tabbar-text\" :style=\"{ color: currentPagePath === item.pagePath ? selectedColor : color }\">\r\n\t\t\t\t\t{{ item.text }}\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { ref, computed, onMounted } from 'vue'\r\n\timport { CustomTabbarProps } from './CustomTabbar'\r\n\timport {\r\n\t\tuseTabBarStore\r\n\t} from '@/store';\r\n\timport { storeToRefs } from 'pinia';\r\n\timport { TabBarItem } from '@/store/modules/tabBar';\r\n\r\n\r\n\tconst props = withDefaults(defineProps<CustomTabbarProps>(), {\r\n\t\tshow: true,\r\n\t\tcolor: '#a0a0a0',\r\n\t\tselectedColor: '#428ac6',\r\n\t\tbackgroundColor: '#fff'\r\n\t})\r\n\r\n\tconst tabBarStore = useTabBarStore()\r\n\tconst visibleTabList = ref(tabBarStore.tabBarList)\r\n\r\n\t// 获取当前页面路径\r\n\tconst getCurrentPagePath = () => {\r\n\t\tconst pages = getCurrentPages();\r\n\t\tconst currentPage = pages[pages.length - 1];\r\n\t\treturn currentPage ? currentPage.route : '';\r\n\t}\r\n\r\n\t// 使用计算属性获取当前页面路径并判断高亮状态\r\n\tconst currentPagePath = computed(() => {\r\n\t\treturn getCurrentPagePath();\r\n\t})\r\n\r\n\t// 处理 tab 点击\r\n\tconst handleTabClick = (item : TabBarItem) => {\r\n\t\tif (currentPagePath.value === item.pagePath) return\r\n\t\tuni.switchTab({\r\n\t\t\turl: `/${item.pagePath}`,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\ttabBarStore.setTabBarPagePath(item.pagePath)\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.custom-tabbar-wrapper {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\t// 小程序会有安全距离\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\r\n\t\t// 添加兼容性处理\r\n\t\t@supports not (padding-bottom: env(safe-area-inset-bottom)) {\r\n\t\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\t}\r\n\r\n\t\t.custom-tabbar {\r\n\t\t\theight: 60px;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.tabbar-item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t&.active {\r\n\t\t\t\t\t.tabbar-icon {\r\n\t\t\t\t\t\ttransform: scale(1.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tabbar-icon {\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tmargin-bottom: 4rpx;\r\n\t\t\t\t\ttransition: transform 0.2s;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// .tabbar-text {\r\n\t\t\t\t// \tfont-size: $font-base;\r\n\t\t\t\t// \tline-height: 1;\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'F:/uniAppTemplate/components/CustomTabBar/CustomTabBar.vue'\nwx.createComponent(Component)"],"names":["useTabBarStore","ref","computed","uni"],"mappings":";;;;;;;;;;;;;;AAgCC,UAAM,cAAcA,qBAAAA;AACd,UAAA,iBAAiBC,cAAAA,IAAI,YAAY,UAAU;AAGjD,UAAM,qBAAqB,MAAM;AAChC,YAAM,QAAQ;AACd,YAAM,cAAc,MAAM,MAAM,SAAS,CAAC;AACnC,aAAA,cAAc,YAAY,QAAQ;AAAA,IAAA;AAIpC,UAAA,kBAAkBC,cAAAA,SAAS,MAAM;AACtC,aAAO,mBAAmB;AAAA,IAAA,CAC1B;AAGK,UAAA,iBAAiB,CAAC,SAAsB;AACzC,UAAA,gBAAgB,UAAU,KAAK;AAAU;AAC7CC,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK,IAAI,KAAK,QAAQ;AAAA,QACtB,SAAS,MAAM;AACF,sBAAA,kBAAkB,KAAK,QAAQ;AAAA,QAC5C;AAAA,MAAA,CACA;AAAA,IAAA;;;;;;;;;;;;;;;;;;ACtDH,GAAG,gBAAgB,SAAS;"}